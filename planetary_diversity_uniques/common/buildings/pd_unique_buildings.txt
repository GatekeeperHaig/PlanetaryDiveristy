#Floating

building_eludium_mine = {
	base_buildtime = @b1_time
	icon = building_eludium_mines

	is_capped_by_modifier = yes

	category = resource
	
	potential = {
		NOT = { has_modifier = resort_colony }
	}

	show_tech_unlock_if = {
		owner = { any_owned_planet = { is_planet_class = pc_floating } }
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_regular_empire = yes }
		}
		modifier = {
			job_eludium_expert_add = 1
		}
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_hive_empire = yes }
		}
		modifier = {
			job_eludium_drone_add = 1
		}
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_machine_empire = yes }
		}
		modifier = {
			job_eludium_drone_add = 1
		}
	}
	
	resources = {
		category = planet_buildings
		cost = {
			minerals = 2000
		}
		upkeep = {
			energy = 20
		}
	}	 
	
	prerequisites = {
		"tech_eludium_mine"
	}
}
building_eludium_institute = {
	base_buildtime = @b3_time
	base_cap_amount = 1
	empire_limit = 1

	category = research

	potential = {
		NOT = { has_modifier = resort_colony }
		NOT = { has_modifier = slave_colony }
		exists = owner
		text = EMPIRE_UNIQUE_BUILDING
		owner = {
			NOT = {
				has_country_flag = building_eludium_institute
			}
		}
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = resort_colony
			has_modifier = slave_colony
		}
	}

	#convert_to = {
	#	building_supercomputer
	#}

	allow = {
		has_major_upgraded_capital = yes
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b3_minerals
			sr_eludium = 200
		}
		upkeep = {
			energy = @b3_upkeep
			sr_eludium = 2
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { NOT = { has_deficit = sr_eludium } }
			owner = { is_regular_empire = yes }
		}
		planet_researchers_produces_mult = 0.1
		job_head_researcher_add = 1
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { NOT = { has_deficit = sr_eludium } }
			owner = { is_hive_empire = yes }
		}
		planet_researchers_produces_mult = 0.1
		job_brain_drone_add = 2
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { NOT = { has_deficit = sr_eludium } }
			owner = { is_machine_empire = yes }
		}
		planet_researchers_produces_mult = 0.1
		job_calculator_add = 2
	}

	country_modifier = {
		all_technology_research_speed = 0.05
	}

	prerequisites = {
		"tech_eludium_research_initiative"
	}

	show_tech_unlock_if = {
		owner = { any_owned_planet = { is_planet_class = pc_floating } }
	}

	ai_resource_production = {
		trigger = { always = yes }
		physics_research = 3
		society_research = 3
		engineering_research = 3
	}
	ai_resource_production = {
		trigger = {
			planet_resource_compare = {
				resource = physics_research
				value >= 20
			}
		}
		physics_research = 3
		society_research = 3
		engineering_research = 3
	}
	ai_resource_production = {
		trigger = {
			planet_resource_compare = {
				resource = physics_research
				value >= 40
			}
		}
		physics_research = 3
		society_research = 3
		engineering_research = 3
	}

	on_built = {
		owner = { set_country_flag = building_eludium_institute }
	}

	on_destroy = {
		owner = {
			if = {
				limit = {
					has_country_flag = building_eludium_institute
				}
				remove_country_flag = building_eludium_institute
			}
		}
	}
}
building_eludium_floating_islands = {
	base_buildtime = @b3_time
	can_be_disabled = no
	can_be_ruined = no
	can_demolish = no
	base_cap_amount = 1
	

	category = amenity

	potential = {
		NOT = { has_modifier = resort_colony }
		NOT = { has_modifier = slave_colony }
		NOR = { 
			is_planet_class = pc_floating
			is_planet_class = pc_crystal
			is_planet_class = pc_graveyard
			is_planet_class = pc_technoorganic
		}
	}

	allow = {
		has_major_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			has_modifier = resort_colony
		}
	}

	triggered_planet_modifier = {
		potential = {
			OR = {
				is_artificial = no
				is_pd_habitat = no
			}
		}
		planet_max_districts_add = 2
		planet_housing_add = 20
		planet_amenities_add = 20
	}

	triggered_planet_modifier = {
		potential = {
			OR = {
				is_artificial = yes
				is_pd_habitat = yes
			}
		}
		planet_max_districts_add = 1
		planet_housing_add = 20
		planet_amenities_add = 20
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b3_minerals
			sr_eludium = 1000
		}
		upkeep = {
			energy = @b3_upkeep
		}
	}

	prerequisites = {
		"tech_eludium_floating_islands"
	}
}

#Graveyard

building_graveyard_well = {
	base_buildtime = 360

	is_capped_by_modifier = yes

	category = resource
	
	potential = {
		NOT = { has_modifier = resort_colony }
	}

	allow = {
		has_upgraded_capital = yes
	}
	
	prerequisites = {
		"tech_mine_tiyanki_butcher"
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_regular_empire = yes }
		}
		modifier = {
			job_graveyard_driller_add = 1
		}
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_gestalt = yes }
		}
		modifier = {
			job_graveyard_drone_add = 1
		}
	}

	show_tech_unlock_if = {
		owner = { any_owned_planet = { is_planet_class = pc_graveyard } }
	}	
	
	resources = {
		category = planet_buildings
		cost = {
			minerals = 2000
		}
		upkeep = {
			energy = 20
		}
	} 
}
building_tiyanki_research_centre = {
	base_buildtime = @b3_time
	base_cap_amount = 1
	empire_limit = 1

	category = research

	potential = {
		NOT = { has_modifier = resort_colony }
		NOT = { has_modifier = slave_colony }
		exists = owner
		text = EMPIRE_UNIQUE_BUILDING
		owner = {
			NOT = {
				has_country_flag = building_tiyanki_research_centre
			}
		}
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = resort_colony
			has_modifier = slave_colony
		}
		NOT = { owner = { has_country_flag = pdtiyankiharvest } }
	}

	allow = {
		has_major_upgraded_capital = yes
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b3_minerals
			sr_tiyanki_parts = 200
		}
		upkeep = {
			energy = @b3_upkeep
			sr_tiyanki_parts = 2
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { NOT = { has_deficit = sr_tiyanki_parts } }
			owner = { is_regular_empire = yes }
		}
		planet_jobs_society_research_produces_mult = 0.25
		job_head_researcher_add = 2
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { NOT = { has_deficit = sr_tiyanki_parts } }
			owner = { is_hive_empire = yes }
		}
		planet_jobs_society_research_produces_mult = 0.25
		job_brain_drone_add = 4
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { NOT = { has_deficit = sr_tiyanki_parts } }
			owner = { is_machine_empire = yes }
		}
		planet_jobs_society_research_produces_mult = 0.25
		job_calculator_add = 4
	}

	country_modifier = {
		all_technology_research_speed = 0.05
	}

	prerequisites = {
		"tech_tiyanki_research_centre"
	}

	ai_resource_production = {
		trigger = { always = yes }
		physics_research = 3
		society_research = 3
		engineering_research = 3
	}
	ai_resource_production = {
		trigger = {
			planet_resource_compare = {
				resource = physics_research
				value >= 20
			}
		}
		physics_research = 3
		society_research = 3
		engineering_research = 3
	}
	ai_resource_production = {
		trigger = {
			planet_resource_compare = {
				resource = physics_research
				value >= 40
			}
		}
		physics_research = 3
		society_research = 3
		engineering_research = 3
	}

	on_built = {
		owner = { set_country_flag = building_tiyanki_research_centre }
	}

	on_destroy = {
		owner = {
			if = {
				limit = {
					has_country_flag = building_tiyanki_research_centre
				}
				remove_country_flag = building_tiyanki_research_centre
			}
		}
	}
}
building_tiyanki_parts_market = {
	base_buildtime = @b3_time
	base_cap_amount = 1

	category = trade

	potential = {
		NOT = { has_modifier = resort_colony }
		NOT = { has_modifier = slave_colony }
	}

	allow = {
		has_major_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			owner = { is_regular_empire = no }
			has_modifier = slave_colony
			has_modifier = resort_colony
		}
		NOT = { owner = { has_country_flag = pdtiyankiharvest } }
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { NOT = { has_deficit = sr_tiyanki_parts } }
			owner = { is_regular_empire = yes }
		}
		job_merchant_add = 2
		trade_value_mult = 0.20
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b3_minerals
			sr_tiyanki_parts = 100
		}
		upkeep = {
			energy = @b3_upkeep
			sr_tiyanki_parts = 1
		}
	}

	prerequisites = {
		"tech_tiyanki_parts_market"
	}

	triggered_desc = {
		text = job_merchant_effect_desc
	}

	ai_resource_production = {
		energy = 3
		trigger = {
			always = yes
		}
	}
	ai_resource_production = {
		energy = 5
		trigger = {
			solar_system = {
				has_system_trade_value >= 50
			}
		}
	}
	ai_resource_production = {
		energy = 3
		trigger = {
			solar_system = {
				has_system_trade_value >= 80
			}
		}
	}
}
building_tiyanki_power_plant = {
	base_buildtime = @b3_time
	base_cap_amount = 1

	category = trade

	potential = {
		NOT = { has_modifier = resort_colony }
		NOT = { has_modifier = slave_colony }
	}

	allow = {
		has_major_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			owner = { is_gestalt = no }
			has_modifier = slave_colony
			has_modifier = resort_colony
		}
		NOT = { owner = { has_country_flag = pdtiyankiharvest } }
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { NOT = { has_deficit = sr_tiyanki_parts } }
			owner = { is_gestalt = yes }
		}
		job_technician_drone_add = 4
		planet_jobs_energy_produces_mult = 0.20
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b3_minerals
			sr_tiyanki_parts = 100
		}
		upkeep = {
			energy = @b3_upkeep
			sr_tiyanki_parts = 1
		}
	}

	prerequisites = {
		"tech_tiyanki_power_plant"
	}

	triggered_desc = {
		text = job_technician_drone_desc
	}

	ai_resource_production = {
		energy = 6
		trigger = {
			always = yes
		}
	}
	ai_resource_production = {
		energy = 6
		trigger = {
			planet_resource_compare = {
				resource = energy
				value >= 24
				type = produces
			}
		}
	}
	ai_resource_production = {
		energy = 6
		trigger = {
			planet_resource_compare = {
				resource = energy
				value >= 48
				type = produces
			}
		}
	}
}
building_tiyanki_observation_headquarters = {
	base_buildtime = @b3_time
	base_cap_amount = 1
	empire_limit = 1

	category = research

	potential = {
		NOT = { has_modifier = resort_colony }
		NOT = { has_modifier = slave_colony }
		exists = owner
		text = EMPIRE_UNIQUE_BUILDING
		owner = {
			NOT = {
				has_country_flag = building_tiyanki_observation_headquarters
			}
		}
		is_planet_class = pc_graveyard
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = resort_colony
			has_modifier = slave_colony
		}
		NOT = { owner = { has_country_flag = pdtiyankistudyonly } }
	}

	allow = {
		has_major_upgraded_capital = yes
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b3_minerals
			exotic_gases = 200
		}
		upkeep = {
			energy = @b3_upkeep
			exotic_gases = 2
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_regular_empire = yes }
			owner = { NOT = { is_spiritualist = yes } }
		}
		planet_jobs_society_research_produces_mult = 0.25
		planet_jobs_unity_produces_mult = 0.25
		job_head_researcher_add = 4
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_regular_empire = yes }
			owner = { is_spiritualist = yes }
		}
		planet_jobs_society_research_produces_mult = 0.25
		planet_jobs_unity_produces_mult = 0.25
		job_head_researcher_add = 2
		job_high_priest_add = 2
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_hive_empire = yes }
		}
		planet_jobs_society_research_produces_mult = 0.25
		planet_jobs_unity_produces_mult = 0.25
		job_brain_drone_add = 6
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_machine_empire = yes }
		}
		planet_jobs_society_research_produces_mult = 0.25
		planet_jobs_unity_produces_mult = 0.25
		job_calculator_add = 6
	}

	country_modifier = {
		all_technology_research_speed = 0.1
	}

	prerequisites = {
		"tech_tiyanki_observation_headquarters"
	}

	ai_resource_production = {
		trigger = { always = yes }
		physics_research = 3
		society_research = 3
		engineering_research = 3
	}
	ai_resource_production = {
		trigger = {
			planet_resource_compare = {
				resource = physics_research
				value >= 20
			}
		}
		physics_research = 3
		society_research = 3
		engineering_research = 3
	}
	ai_resource_production = {
		trigger = {
			planet_resource_compare = {
				resource = physics_research
				value >= 40
			}
		}
		physics_research = 3
		society_research = 3
		engineering_research = 3
	}

	on_built = {
		owner = { set_country_flag = building_tiyanki_observation_headquarters }
	}

	on_destroy = {
		owner = {
			if = {
				limit = {
					has_country_flag = building_tiyanki_observation_headquarters
				}
				remove_country_flag = building_tiyanki_observation_headquarters
			}
		}
	}
}
building_tiyanki_observation_lab = {
	base_buildtime = @b3_time
	base_cap_amount = 1

	category = trade

	potential = {
		NOT = { has_modifier = resort_colony }
		NOT = { has_modifier = slave_colony }
		NOT = { is_planet_class = pc_graveyard }
	}

	allow = {
		has_major_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			has_modifier = resort_colony
		}
		NOT = { owner = { has_country_flag = pdtiyankistudyonly } }
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_regular_empire = yes }
			owner = { NOT = { is_spiritualist = yes } }
		}
		planet_jobs_society_research_produces_mult = 0.1
		planet_jobs_unity_produces_mult = 0.1
		job_head_researcher_add = 2
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_regular_empire = yes }
			owner = { is_spiritualist = yes }
		}
		planet_jobs_society_research_produces_mult = 0.1
		planet_jobs_unity_produces_mult = 0.1
		job_head_researcher_add = 1
		job_high_priest_add = 1
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_hive_empire = yes }
		}
		planet_jobs_society_research_produces_mult = 0.1
		planet_jobs_unity_produces_mult = 0.1
		job_brain_drone_add = 3
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_machine_empire = yes }
		}
		planet_jobs_society_research_produces_mult = 0.1
		planet_jobs_unity_produces_mult = 0.1
		job_calculator_add = 3
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b3_minerals
			exotic_gases = 50
		}
		upkeep = {
			energy = @b3_upkeep
			exotic_gases = 1
		}
	}

	prerequisites = {
		"tech_tiyanki_observation_lab"
	}

	triggered_desc = {
		text = job_head_researcher_effect_desc
	}

	ai_resource_production = {
		trigger = { always = yes }
		physics_research = 3
		society_research = 3
		engineering_research = 3
	}
	ai_resource_production = {
		trigger = {
			planet_resource_compare = {
				resource = physics_research
				value >= 20
			}
		}
		physics_research = 3
		society_research = 3
		engineering_research = 3
	}
	ai_resource_production = {
		trigger = {
			planet_resource_compare = {
				resource = physics_research
				value >= 40
			}
		}
		physics_research = 3
		society_research = 3
		engineering_research = 3
	}
}

#Crystal
building_crystal_carver = {
	base_buildtime = 360

	is_capped_by_modifier = yes

	category = resource
	
	potential = {
		NOT = { has_modifier = resort_colony }
	}
	
	prerequisites = {
		"tech_acean_mine"
	}

	allow = {
		has_upgraded_capital = yes
	}

	show_tech_unlock_if = {
		owner = { any_owned_planet = { is_planet_class = pc_crystal } }
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_regular_empire = yes }
		}
		modifier = {
			job_crystal_carver_add = 1
		}
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_hive_empire = yes }
		}
		modifier = {
			job_crystal_hive_add = 1
		}
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_machine_empire = yes }
		}
		modifier = {
			job_crystal_robot_add = 1
		}
	}
	
	resources = {
		category = planet_buildings
		cost = {
			minerals = 400
		}
		upkeep = {
			energy = 1
		}
	}	
} 
building_acean_farm = {
	base_buildtime = @b3_time
	base_cap_amount = 1

	category = resource

	potential = {
		NOT = { has_modifier = resort_colony }
		NOT = { has_modifier = slave_colony }
		NOT = { is_planet_class = pc_crystal }
	}

	allow = {
		has_major_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			#owner = { is_regular_empire = no }
			has_modifier = slave_colony
			has_modifier = resort_colony
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { NOT = { has_deficit = sr_acean } }
			owner = { is_regular_empire = yes }
		}
		planet_jobs_food_produces_mult = 0.2
		BIOLOGICAL_pop_growth_speed = 0.1
		job_farmer_add = 4
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { NOT = { has_deficit = sr_acean } }
			owner = { is_gestalt = yes }
		}
		planet_jobs_food_produces_mult = 0.2
		BIOLOGICAL_pop_growth_speed = 0.1
		job_agri_drone_add = 4
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b3_minerals
			sr_acean = 100
		}
		upkeep = {
			energy = @b3_upkeep
			sr_acean = 1
		}
	}

	prerequisites = {
		"tech_acean_farm"
	}

	ai_resource_production = {
		food = 3
		trigger = {
			always = yes
		}
	}
	ai_resource_production = {
		food = 3
		trigger = {
			planet_resource_compare = {
				resource = food
				value >= 20
				type = produces
			}
		}
	}
	ai_resource_production = {
		food = 3
		trigger = {
			planet_resource_compare = {
				resource = food
				value >= 40
				type = produces
			}
		}
	}
}
building_acean_patch = {
	base_buildtime = @b3_time
	base_cap_amount = 1

	category = resource

	potential = {
		NOT = { has_modifier = resort_colony }
		NOT = { has_modifier = slave_colony }
		NOT = { is_planet_class = pc_crystal }
	}

	allow = {
		has_major_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			#owner = { is_regular_empire = no }
			has_modifier = slave_colony
			has_modifier = resort_colony
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { NOT = { has_deficit = sr_acean } }
			owner = { is_regular_empire = yes }
		}
		planet_jobs_minerals_produces_mult = 0.2
		job_crystal_miner_add = 1
		job_miner_add = 4
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { NOT = { has_deficit = sr_acean } }
			owner = { is_gestalt = yes }
		}
		planet_jobs_minerals_produces_mult = 0.2
		job_crystal_mining_drone_add = 1
		job_mining_drone_add = 4
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b3_minerals
			sr_acean = 100
		}
		upkeep = {
			energy = @b3_upkeep
			sr_acean = 1
		}
	}

	prerequisites = {
		"tech_acean_patch"
	}

	ai_resource_production = {
		minerals = 3
		trigger = {
			always = yes
		}
	}
	ai_resource_production = {
		minerals = 3
		trigger = {
			planet_resource_compare = {
				resource = minerals
				value >= 20
				type = produces
			}
		}
	}
	ai_resource_production = {
		minerals = 3
		trigger = {
			planet_resource_compare = {
				resource = minerals
				value >= 40
				type = produces
			}
		}
	}
}

# Archive Central Complex
building_archive_major_capital = {
	capital = yes
	can_build = no
	can_demolish = no
	can_be_ruined = no
	can_be_disabled = no
	icon = building_major_capital

	category = government
	
	potential = {
		is_planet_class = pc_archive
	}
	
	allow = {
		num_pops >= 10
	}
	
	resources = {
		category = planet_buildings
		cost = {
			minerals = 500
		}		
		upkeep = {
			energy = 5
			alloys = 5
		}		
	}
	
	planet_modifier = {
		planet_housing_add = 5
		planet_amenities_add = 5	
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_regular_empire = yes }
		}
		job_enforcer_add = 1
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_hive_empire = yes }
		}
		job_synapse_drone_add = 2
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_machine_empire = yes }
		}
		job_coordinator_add = 2
		job_replicator_add = 1
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_mechanical_empire = yes }		
		}
		job_roboticist_add = 2
	}	
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				is_regular_empire = yes
				NOR = {
					has_authority = auth_corporate
					has_civic = civic_exalted_priesthood 
					has_civic = civic_aristocratic_elite
					has_civic = civic_merchant_guilds
					has_civic = civic_technocracy
				}
			}					
		}
		modifier = {
			job_politician_add = 2
		}
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_authority = auth_corporate }
		}
		modifier = {
			job_executive_add = 2
		}
	}	
	
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_civic = civic_exalted_priesthood }					
		}
		modifier = {
			job_politician_add = 1
			job_high_priest_add = 1
		}
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_civic = civic_aristocratic_elite }					
		}
		modifier = {
			job_politician_add = 1
			job_noble_add = 1
		} 
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_civic = civic_technocracy }					
		}
		modifier = {
			job_head_researcher_add = 1		
			job_politician_add = 1
		} 
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_civic = civic_merchant_guilds }					
		}
		modifier = {
			job_politician_add = 1
			job_merchant_add = 1
		}
	}
	
	triggered_desc = {
		trigger = {
			exists = owner
			owner = { 
				has_civic = civic_exalted_priesthood
			}
		}
		text = job_high_priest_effect_desc
	}	
	triggered_desc = {
		trigger = {
			exists = owner
			owner = { 
				has_civic = civic_aristocratic_elite
			}
		}
		text = job_noble_effect_desc
	}			
	triggered_desc = {
		trigger = {
			exists = owner
			owner = { 
				has_civic = civic_merchant_guilds
			}
		}
		text = job_merchant_effect_desc
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = { 
				NOT = { has_authority = auth_corporate }
				is_regular_empire = yes 
			}
		}	
		text = job_politician_effect_desc
	}
	
	triggered_desc = {
		trigger = { 
			exists = owner
			owner = { is_mechanical_empire = yes }		
		}
		text = job_roboticist_effect_desc
	}	
	
	triggered_desc = {
		trigger = {
			exists = owner
			owner = { 
				has_authority = auth_corporate
			}
		}	
		text = job_executive_effect_desc
	}
	
	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_regular_empire = yes }
		}		
		text = job_enforcer_effect_desc
	}
	
	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_machine_empire = yes }
		}		
		text = job_coordinator_effect_desc
	}		
	
	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_machine_empire = yes }
		}	
		text = job_replicator_effect_desc
	}	
	
	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_hive_empire = yes }
		}	
		text = job_synapse_drone_effect_desc
	}		 
}

#Techno-Organic
#Planet Unique
building_techno_synth_workshop = {
	base_buildtime = @b3_time
	base_cap_amount = 1

	category = research

	potential = {
		NOT = { has_modifier = resort_colony }
		NOT = { has_modifier = slave_colony }
		NOT = { is_planet_class = pc_technoorganic }
		NOT = { is_planet_class = pc_pd_techno_arc }
	}

	allow = {
		has_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			has_modifier = resort_colony
		}
	}

	planet_modifier = {
        planet_researchers_engineering_research_produces_add = 1
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { NOT = { has_deficit = sr_living_metal } }
			owner = { is_regular_empire = yes }
		}
		job_techno_eng_add = 2
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { NOT = { has_deficit = sr_living_metal } }
			owner = { is_hive_empire = yes }
		}
		job_techno_drone_add = 2
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { NOT = { has_deficit = sr_living_metal } }
			owner = { is_machine_empire = yes }
		}
		job_techno_drone_add = 2
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b3_minerals
			sr_living_metal = 100
		}
		upkeep = {
			energy = @b3_upkeep
		}
	}

	prerequisites = {
		"tech_techno_synth_workshop"
	}
}
#Origin Living Metal Refine
building_biosynth_lm_refinery = {
	base_buildtime = @b3_time

	category = manufacturing

	potential = {
		NOT = { has_modifier = resort_colony }
		NOT = { has_modifier = slave_colony }
	}

	allow = {
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			has_modifier = resort_colony
			owner = { NOT = { has_origin = origin_techno_world } }
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_origin = origin_techno_world }
			owner = { is_regular_empire = yes }
		}
		job_pd_lm_refiner_add = 1
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_origin = origin_techno_world }
			owner = { is_hive_empire = yes }
		}
		job_pd_lm_refiner_drone_add = 1
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b3_minerals
		}
		upkeep = {
			energy = @b3_upkeep
		}
	}

	prerequisites = {
		"tech_biosynth_lm_refinery"
	}
}
#Holding
holding_pd_techno_canal = {
	base_buildtime = @b2_time

	owner_type = subject_holding
	icon = building_techno_synth_workshop
	base_cap_amount = 1

	category = resource

	resources = {
		category = planet_holdings
		produces = {
			engineering_research = 6
			food = 6
		}
	}

	potential = {
		owner.overlord = { 	has_technology = tech_techno_canal }
		NOT = { planet.owner = { country_uses_food = no } }
		is_pd_hive_world = no
		is_artificial = no
		is_pd_unique = no
		is_pd_arcology = no
		is_pd_machine = no
		is_pd_habitat = no
		is_pd_planetary_megaproject = no
	}
	destroy_trigger = {
		is_pd_hive_world = yes
		is_artificial = yes
		is_pd_unique = yes
		is_pd_arcology = yes
		is_pd_machine = yes
		is_pd_habitat = yes
		is_pd_planetary_megaproject = yes
	}	

	planet_modifier = {
		monthly_loyalty = 0.5
	}

	triggered_planet_modifier = {
		potential = {
			exists = planet.owner
			planet.owner = { is_gestalt = no }
		}
		job_farmer_add = 3
	}
	triggered_planet_modifier = {
		potential = {
			exists = planet.owner
			planet.owner = { is_gestalt = yes }
		}
		job_agri_drone_add = 3
	}

	on_built = {
		planet = {
			add_blocker = { type = d_technocanal_blocker }
			if = {
				limit = { has_deposit = d_technocanal_blocker }
				while = {
					limit = { num_districts = { type = district_farming value > 0 } }
					remove_district = district_farming
					add_district_and_planet_size_if_needed_effect = {
					district = district_farming_uncapped
					}
				}
			}
		}
	}

	on_destroy = {
		planet = {
			if = {
				limit = { has_deposit = d_technocanal_blocker }
				remove_deposit = d_technocanal_blocker
				while = {
					limit = { num_districts = { type = district_farming_uncapped value > 0 } }
					remove_district = district_farming_uncapped
					add_district_and_planet_size_if_needed_effect = {
					district = district_farming
					}
				}
			}
		}
	}
	triggered_desc = {
		text = holding_techno_canal_effect
	}
}

#Zro Mine
building_pdzro_harvester = {
	base_buildtime = 360

	is_capped_by_modifier = yes

	category = resource
	
	potential = {
		NOT = { has_modifier = resort_colony }
	}

	prerequisites = {
		"tech_mine_pd_zro"
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_regular_empire = yes }
		}
		modifier = {
			job_pdzro_harvester_add = 1
		}
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_gestalt = yes }
		}
		modifier = {
			job_pdzro_drone_add = 1
		}
	}
	
	resources = {
		category = planet_buildings
		cost = {
			minerals = 400
		}
		upkeep = {
			energy = 1
		}
	}	

	ai_resource_production = {
		trigger = { always = yes }
		sr_zro = 1
	}	 
}
building_pdzro_dealer_domestic = {
	base_buildtime = 360
	base_cap_amount = 1

	category = resource
	
	potential = {
		NOT = { has_modifier = resort_colony }
		NOT = { is_planet_class = pc_pd_zro }
	}

	prerequisites = {
		"tech_pd_zro_dealer"
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { NOT = { has_deficit = sr_zro } }
			owner = { is_regular_empire = yes }
		}
		modifier = {
			job_pdzro_dealer_add = 4
		}
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { NOT = { has_deficit = sr_zro } }
			owner = { is_gestalt = yes }
		}
		modifier = {
			job_pdzro_dealer_drone_add = 4
		}
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b1_minerals
			sr_zro = 100
		}
		upkeep = {
			energy = 2
		}
	}

	ai_resource_production = {
		trigger = { always = yes }
		sr_zro = 1
	}	 
}
holding_pdzro_dealer = {
	base_buildtime = 360
	owner_type = subject_holding
	icon = building_pdzro_dealer_domestic
	base_cap_amount = 1

	category = resource

	planet_modifier = {
		pop_happiness = 0.1
		monthly_loyalty = 1.0
	}

	prerequisites = {
		"tech_pd_zro_dealer"
	}

	triggered_planet_modifier = {
		potential = {
			exists = planet.owner
			planet.owner = { is_gestalt = no }
			owner = { NOT = { has_deficit = sr_zro } }
			owner = { is_regular_empire = yes }
		}
		modifier = {
			job_overlord_pdzro_dealer_add = 2
		}
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { NOT = { has_deficit = sr_zro } }
			owner = { is_gestalt = yes }
		}
		modifier = {
			job_overlord_pdzro_dealer_drone_add = 2
		}
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b1_minerals
			sr_zro = 100
		}
		upkeep = {
			energy = 2
		}
	}

	triggered_desc = {
		text = job_overlord_pdzro_dealer_effect_desc
	}	 
}
building_corporate_pdzro = {
	base_buildtime = @b2_time
	base_cap_amount = 1
	icon = building_pdzro_dealer_domestic

	category = trade

	owner_type = corporate

	potential = {
		has_branch_office = yes
		branch_office_owner = { is_criminal_syndicate = no }
	}

	allow = {
		custom_tooltip = {
			fail_text = "requires_building_major_capital"
			OR = {
				has_building = building_major_capital
				has_building = building_system_capital
				has_building = building_imperial_capital
			}
		}
	}

	prerequisites = {
		"tech_pd_zro_dealer"
	}

	show_tech_unlock_if = {
		is_megacorp = yes
		is_criminal_syndicate = no
	}

	#triggered_country_modifier = {
	#	potential = {
	#		exists = owner
	#		owner = { NOT = { has_deficit = sr_zro } }
	#	}
	#	country_energy_produces_mult = 0.05
	#}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { NOT = { has_deficit = sr_zro } }
		}
		modifier = {
			job_merchant_add = 1
			pop_happiness = 0.1
			branch_office_value_mult = 0.2
		}
	}

	resources = {
		category = planet_branch_office_buildings
		cost = {
			minerals = @b3_minerals
			sr_zro = 100
		}
		upkeep = {
			energy = 3
			sr_zro = 1
		}
	}

	ai_weight = {
		weight = 50
		modifier = {
			factor = 10
			branch_office_owner = {
				is_galactic_community_member = yes
			}
		}
	}
}
building_crime_syndicate_pdzro = {
	base_buildtime = @b2_time
	base_cap_amount = 1

	owner_type = corporate

	category = trade

	potential = {
		has_branch_office = yes
		branch_office_owner = { is_criminal_syndicate = yes }
	}

	allow = {
		custom_tooltip = {
			fail_text = "requires_building_major_capital"
			OR = {
				has_building = building_major_capital
				has_building = building_system_capital
				has_building = building_imperial_capital
			}
		}
	}

	prerequisites = {
		"tech_pd_zro_dealer"
	}

	show_tech_unlock_if = {
		is_megacorp = yes
		is_criminal_syndicate = yes
	}

	triggered_country_modifier = {
		potential = {
			exists = owner
			owner = { NOT = { has_deficit = sr_zro } }
		}
		spy_network_levels_add = 5
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { NOT = { has_deficit = sr_zro } }
		}
		modifier = {
			job_merchant_add = 1
			branch_office_value_mult = 0.25
			planet_crime_add = 50
		}
	}

	resources = {
		category = planet_branch_office_buildings
		cost = {
			minerals = @b3_minerals
			sr_zro = 100
		}
		upkeep = {
			energy = 3
			sr_zro = 1
		}
	}

	ai_weight = {
		weight = 50
		modifier = {
			factor = 10
			branch_office_owner = {
				is_galactic_community_member = yes
			}
		}
	}
}
building_zro_institute = {
	base_buildtime = @b3_time
	base_cap_amount = 1
	empire_limit = 1

	category = research

	potential = {
		NOT = { has_modifier = resort_colony }
		NOT = { has_modifier = slave_colony }
		exists = owner
		text = EMPIRE_UNIQUE_BUILDING
		owner = {
			NOT = {
				has_country_flag = building_zro_institute
			}
		}
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = resort_colony
			has_modifier = slave_colony
		}
	}

	#convert_to = {
	#	building_supercomputer
	#}

	allow = {
		has_major_upgraded_capital = yes
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b3_minerals
			sr_zro = 200
		}
		upkeep = {
			energy = @b3_upkeep
			sr_zro = 2
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { NOT = { has_deficit = sr_zro } }
			owner = { is_regular_empire = yes }
		}
		planet_researchers_produces_mult = 0.1
		job_head_researcher_add = 1
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { NOT = { has_deficit = sr_zro } }
			owner = { is_hive_empire = yes }
		}
		planet_researchers_produces_mult = 0.1
		job_brain_drone_add = 2
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { NOT = { has_deficit = sr_zro } }
			owner = { is_machine_empire = yes }
		}
		planet_researchers_produces_mult = 0.1
		job_calculator_add = 2
	}

	country_modifier = {
		all_technology_research_speed = 0.05
	}

	prerequisites = {
		"tech_zro_research_initiative"
	}

	show_tech_unlock_if = {
		owner = { any_owned_planet = { is_planet_class = pc_pd_zro } }
	}

	ai_resource_production = {
		trigger = { always = yes }
		physics_research = 3
		society_research = 3
		engineering_research = 3
	}
	ai_resource_production = {
		trigger = {
			planet_resource_compare = {
				resource = physics_research
				value >= 20
			}
		}
		physics_research = 3
		society_research = 3
		engineering_research = 3
	}
	ai_resource_production = {
		trigger = {
			planet_resource_compare = {
				resource = physics_research
				value >= 40
			}
		}
		physics_research = 3
		society_research = 3
		engineering_research = 3
	}

	on_built = {
		owner = { set_country_flag = building_zro_institute }
	}

	on_destroy = {
		owner = {
			if = {
				limit = {
					has_country_flag = building_zro_institute
				}
				remove_country_flag = building_zro_institute
			}
		}
	}
}
building_pdzro_hub = {
	icon = building_pdzro_hub
	base_buildtime = @b3_time
	base_cap_amount = 1

	category = research

	prerequisites = {
		"tech_pd_robo_zro_processing"
	}

	potential = {
		exists = owner
		owner = { is_machine_empire = yes }
	}

	allow = {
		owner = { is_machine_empire = yes }
	}

	destroy_trigger = {
		exists = owner
		owner = { is_robot_empire = no }
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_machine_empire = yes }
			owner = { NOT = { has_deficit = sr_zro } }
		}
		modifier = {
			planet_jobs_produces_mult = 0.1
			planet_pop_assembly_mult = 0.1
		}
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b3_minerals
			sr_zro = 100
		}
		upkeep = {
			energy = @b3_upkeep
			sr_zro = 1
		}
	}
}

#Scrapyard
#Planet Unique
building_pd_junksmelter = {
	base_buildtime = @b3_time
	base_cap_amount = 1

	category = resource

	potential = {
		NOT = { has_modifier = resort_colony }
		NOT = { is_planet_class = pc_pd_scrapyard }
	}

	allow = {
		has_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		owner = {
			NOT = { has_technology = tech_pd_scrapyard_incinerator }
		}
	}

	planet_modifier = {
		planet_technician_energy_produces_add = 1
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_regular_empire = yes }
		}
		job_pd_scrap_tech_add = 6
	}

	triggered_planet_modifier = {
		potential = {
			exists = branch_office_owner
			owner = { is_gestalt = yes }
		}
		job_pd_scrap_tech_drone_add = 6
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b3_minerals
		}
		upkeep = {
			energy = @b3_upkeep
		}
	}

	prerequisites = {
		"tech_pd_scrapyard_incinerator"
	}


}
#Empire Unique
building_pd_scrap_coordination = {
	base_buildtime = @b3_time
	base_cap_amount = 1
	empire_limit = 1

	category = research

	potential = {
		NOT = { has_modifier = resort_colony }
		exists = owner
		text = EMPIRE_UNIQUE_BUILDING
		owner = {
			NOT = {
				has_country_flag = building_pd_scrap_coordination
			}
		}
	}

	destroy_trigger = {
		exists = owner
		owner = {
			has_technology = tech_pd_scrapyard_coordination
		}
		has_modifier = slave_colony
	}

	allow = {
		has_major_upgraded_capital = yes
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b3_minerals
		}
		upkeep = {
			energy = @b3_upkeep
		}
	}

	planet_modifier = {
		planet_jobs_engineering_research_produces_mult = 0.25
	}

	country_modifier = {
		starbase_shipyard_build_speed_mult = 0.1
		starbase_shipyard_build_cost_mult = -0.1
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_regular_empire = yes }
		}
		job_head_researcher_add = 1
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_hive_empire = yes }
		}
		job_brain_drone_add = 2
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_machine_empire = yes }
		}
		job_calculator_add = 2
	}

	prerequisites = {
		"tech_pd_scrapyard_coordination"
	}

	ai_resource_production = {
		trigger = { always = yes }
		physics_research = 3
		society_research = 3
		engineering_research = 3
	}
	ai_resource_production = {
		trigger = {
			planet_resource_compare = {
				resource = physics_research
				value >= 20
			}
		}
		physics_research = 3
		society_research = 3
		engineering_research = 3
	}
	ai_resource_production = {
		trigger = {
			planet_resource_compare = {
				resource = physics_research
				value >= 40
			}
		}
		physics_research = 3
		society_research = 3
		engineering_research = 3
	}

	on_built = {
		owner = { set_country_flag = building_pd_scrap_coordination }
	}

	on_destroy = {
		owner = {
			if = {
				limit = {
					has_country_flag = building_pd_scrap_coordination
				}
				remove_country_flag = building_pd_scrap_coordination
			}
		}
	}
}
#Holding
holding_pd_scrap_pile = {
	base_buildtime = @b2_time
	owner_type = subject_holding
	icon = holding_pd_scrap_pile
	base_cap_amount = 1
	
	category = research

	resources = {
		category = planet_holdings
		produces = {
			engineering_research = 8
			physics_research = 2
			society_research = 2
		}
	}

	potential = {
		owner.overlord = { any_owned_planet = { is_planet_class = pc_pd_scrapyard } }
		NOT = { is_planet_class = pc_pd_scrapyard }
	}

	planet_modifier = {
		monthly_loyalty = -0.5
		habitability_ceil_add = -0.1
	}

	triggered_planet_modifier = {
		potential = {
			exists = planet.owner
			planet.owner = { is_gestalt = no }
		}
		job_pd_scrap_miner_add = 3
	}
	triggered_planet_modifier = {
		potential = {
			exists = planet.owner
			planet.owner = { is_gestalt = yes }
		}
		job_pd_scrap_miner_drone_add = 3
	}

	on_built = {
		planet = {
			owner.overlord.capital_scope = {
				append_scrap_pile_build = yes
				refresh_scrap_pile_build_modifier = yes
			}
		}
	}

	on_destroy = {
		owner.overlord.capital_scope = {
			remove_scrap_pile_build = yes
			refresh_scrap_pile_build_modifier = yes
		}
	}
	triggered_desc = {
		text = holding_scrap_pile_effect
	}
}

#Archive Buildings
building_pd_archive_link_node = {
	base_buildtime = 600
	base_cap_amount = 1
	empire_limit = 3
	
	icon = building_pd_archive_link_node

	category = research

	potential = {
		exists = owner
		owner = { 
			any_owned_planet = {
				is_planet_class = pc_archive
			}
		}
		NOT = { is_planet_class = pc_archive }
		NOT = { has_modifier = resort_colony }
	}
	
	allow = {
		has_upgraded_capital = yes
	}

	planet_modifier = {
		planet_researchers_society_research_produces_add = 0.25
		planet_researchers_physics_research_produces_add = 0.25
		planet_researchers_engineering_research_produces_add = 0.25
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_basic_science_lab_2 }
		}
		planet_researchers_society_research_produces_add = 0.25
		planet_researchers_physics_research_produces_add = 0.25
		planet_researchers_engineering_research_produces_add = 0.25
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_basic_science_lab_3 }
		}
		planet_researchers_society_research_produces_add = 0.5
		planet_researchers_physics_research_produces_add = 0.5
		planet_researchers_engineering_research_produces_add = 0.5
	}
    
	# Following Job Pattern as other Lab buildings
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_regular_empire = yes }
		}
		modifier = {
			job_head_researcher_add = 1
		}
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_hive_empire = yes }
		}
		modifier = {
			job_brain_drone_add = 1
		}
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_machine_empire = yes }
		}
		modifier = {
			job_calculator_add = 1
		}
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = 800
		}
		upkeep = {
			energy = 4
		}
	}

	prerequisites = {
		"tech_pd_archive_link_node"
	}

}

#Crucible Buildings
building_pd_magma_forge = {
	base_buildtime = 600
	base_cap_amount = 1
	empire_limit = 3

	category = manufacturing

	potential = {
		exists = owner
		#owner = { 
		#	any_owned_planet = {
		#		OR = {
		#			is_planet_class = pc_crucible 
		#			is_planet_class = pc_clean_crucible 
		#			is_planet_class = pc_shroud_crucible 
		#		}
		#	}
		#	NOT = { is_catalytic_empire = yes }
		#}
		NOR = {
			is_planet_class = pc_crucible 
			is_planet_class = pc_clean_crucible 
			is_planet_class = pc_shroud_crucible 
		}
		NOT = { has_modifier = resort_colony }
	}
	
	allow = {
		has_upgraded_capital = yes
	}

	planet_modifier = {
		planet_metallurgists_alloys_produces_add = 1
		planet_metallurgists_energy_upkeep_add = 3
		#planet_metallurgists_minerals_upkeep_add = -3
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_regular_empire = yes }
		}
		modifier = {
			job_foundry_add = 2
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_hive_empire = yes }
		}
		modifier = {
			job_alloy_drone_add = 2
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_machine_empire = yes }
		}
		modifier = {
			job_fabricator_add = 2
		}
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_regular_empire = yes }
		}
		text = job_foundry_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_machine_empire = yes }
		}
		text = job_fabricator_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_hive_empire = yes }
		}
		text = job_alloy_drone_effect_desc
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = 800
		}
		upkeep = {
			energy = 4
		}
	}

	prerequisites = {
		"tech_pd_magma_forge"
	}
}

#Waform Buildings
building_pd_warform_cyber_lab = {
	base_buildtime = 600
	base_cap_amount = 1
	empire_limit = 3
	
	icon = building_machine_major_capital

	category = research

	potential = {
		exists = owner
		is_pd_warform_world = no
		NOT = { has_modifier = resort_colony }
	}

	allow = {
		has_upgraded_capital = yes
	}

	#Regs
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_regular_empire = yes }
		}
		job_warform_researcher_add = 2
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_regular_empire = yes }
			owner = { has_technology = tech_basic_science_lab_2 }
		}
		job_warform_researcher_add = 2
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_regular_empire = yes }
			owner = { has_technology = tech_basic_science_lab_3 }
		}
		job_warform_researcher_add = 2
	}

	#Hives
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_hive_empire = yes }
		}
		job_warform_brain_drone_add = 2
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_hive_empire = yes }
			owner = { has_technology = tech_basic_science_lab_2 }
		}
		job_warform_brain_drone_add = 2
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_hive_empire = yes }
			owner = { has_technology = tech_basic_science_lab_3 }
		}
		job_warform_brain_drone_add = 2
	}

	#Robots
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_machine_empire = yes }
		}
		job_warform_calculator_add = 2
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_machine_empire = yes }
			owner = { has_technology = tech_basic_science_lab_2 }
		}
		job_warform_calculator_add = 2
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_machine_empire = yes }
			owner = { has_technology = tech_basic_science_lab_3 }
		}
		job_warform_calculator_add = 2
	}

	#Reg
	triggered_planet_modifier = {
		potential = {
			OR = {
				AND = {
					exists = owner
					owner = {
						NOT = { has_policy_flag = roboticist_output_build_cyborgs }
					}
				}
				NOT = { exists = owner }
			}
		}
		planet_pop_assembly_add = 2
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				has_policy_flag = roboticist_output_build_cyborgs
			}
			can_assemble_cyborg_pop = yes
		}
		planet_pop_assembly_organic_add = 2.25
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = 800
		}
		upkeep = {
			energy = 4
		}
	}

	#destroy_trigger = {
	#	exists = owner
	#	owner = {
	#		NOT = {
	#			any_owned_planet = {
	#				OR = {
	#					is_planet_class = pc_pd_red_warform
	#					is_planet_class = pc_pd_orange_warform
	#					is_planet_class = pc_pd_blue_warform
	#				}
	#			}
	#		}
	#	}
	#}

	prerequisites = {
		"tech_pd_warform_cyber_lab"
	}

}